<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="keywords" content="Hexo Theme Redefine">
    
    <meta name="author" content="Miykah">
    <!-- preconnect -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    
        
            <link rel="preconnect" href="https://npm.elemecdn.com" crossorigin>
        
    
    <!--- Seo Part-->
    
    <link rel="canonical" href="https://miykah.top/2023/05/29/phm-接口开放平台/"/>
    <meta name="robots" content="index,follow">
    <meta name="googlebot" content="index,follow">
    <meta name="revisit-after" content="1 days">
    
        <meta name="description" content="项目背景 设想：这是API开放平台，而不是API管理平台。面试官可能会说，可以使用已有的如Swagger这样的API管理，为什么还要开发？API开放平台和管理平台不一样。开放平台，管理员发布接口，用户可以申请开通接口，开通之后接口调用次数可以有限制。怎么考虑结合大项目讲？大项目的健康管理平台会给很多企业使用，大项目可以做二次开发出前端界面，需要调用一些接口。企业人员可以自己进行二次开发，我们（学生">
<meta property="og:type" content="article">
<meta property="og:title" content="接口开放平台项目总结">
<meta property="og:url" content="https://miykah.top/2023/05/29/PHM-%E6%8E%A5%E5%8F%A3%E5%BC%80%E6%94%BE%E5%B9%B3%E5%8F%B0/index.html">
<meta property="og:site_name" content="Miykah&#39;s Zone">
<meta property="og:description" content="项目背景 设想：这是API开放平台，而不是API管理平台。面试官可能会说，可以使用已有的如Swagger这样的API管理，为什么还要开发？API开放平台和管理平台不一样。开放平台，管理员发布接口，用户可以申请开通接口，开通之后接口调用次数可以有限制。怎么考虑结合大项目讲？大项目的健康管理平台会给很多企业使用，大项目可以做二次开发出前端界面，需要调用一些接口。企业人员可以自己进行二次开发，我们（学生">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2023/jpeg/35923527/1684760655076-b1a34046-4dec-4faa-b662-51c3550ed56c.jpeg">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2023/png/35923527/1684547540699-a48854eb-3d3b-4bb4-acfc-a0254183cb66.png#averageHue=%23fafafa&clientId=u6d9db1fc-ed8f-4&from=paste&height=516&id=uc78e05fe&originHeight=1032&originWidth=1391&originalType=binary&ratio=1.100000023841858&rotation=0&showTitle=false&size=88472&status=done&style=none&taskId=u97eeafe2-d365-4eb6-a1c7-14141c90764&title=&width=696">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2023/png/35923527/1684547668578-46cc5d3b-7922-4153-86f7-0efa4f062da1.png#averageHue=%232d2c2b&clientId=u6d9db1fc-ed8f-4&from=paste&id=ufec5399d&originHeight=378&originWidth=909&originalType=binary&ratio=1.100000023841858&rotation=0&showTitle=false&size=45180&status=done&style=none&taskId=uf2f8fdcd-12a7-4c47-8de1-27a39293775&title=">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2023/png/35923527/1684548141669-c8e3c969-5f1d-4535-850e-6e2ffe573c10.png#averageHue=%232d2c2c&clientId=u6d9db1fc-ed8f-4&from=paste&height=592&id=u41384d3f&originHeight=651&originWidth=1281&originalType=binary&ratio=1.100000023841858&rotation=0&showTitle=false&size=144125&status=done&style=none&taskId=uf311c62e-08fe-4fd8-87eb-c32389d9e47&title=&width=1164.545429304612">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2023/png/35923527/1684548485733-06920ab4-5f1f-41bb-aea7-152a4f200ae9.png#averageHue=%232d2c2c&clientId=u6d9db1fc-ed8f-4&from=paste&id=ub2f64d4c&originHeight=370&originWidth=742&originalType=binary&ratio=1.100000023841858&rotation=0&showTitle=false&size=47634&status=done&style=none&taskId=uc0cae24f-8df5-485e-bcf7-1cebf454dfc&title=">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2023/png/35923527/1684554712935-97d7643f-7f86-41fa-82c4-31d9f0c57f48.png#averageHue=%232c2c2b&clientId=u8e5aef47-feb7-4&from=paste&height=582&id=ue99bb8c6&originHeight=640&originWidth=1142&originalType=binary&ratio=1.100000023841858&rotation=0&showTitle=false&size=91234&status=done&style=none&taskId=u67559acd-8a22-4d24-b935-123da300177&title=&width=1038.1817956798338">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2023/png/35923527/1684805821617-0d5d4be0-bf58-4365-9282-65a51b13d9d7.png#averageHue=%23f4f4f4&clientId=u3ad31785-20e4-4&from=paste&height=217&id=u8a99bc9b&originHeight=299&originWidth=569&originalType=binary&ratio=1.375&rotation=0&showTitle=false&size=6244&status=done&style=none&taskId=u7f0c36f0-d8a0-4790-8f28-4f401282fb6&title=&width=413.8181818181818">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2023/png/35923527/1684806148066-0d1d39f4-c1fe-4acc-82d1-1a598c8da821.png#averageHue=%232d2c2c&clientId=u3ad31785-20e4-4&from=paste&height=180&id=u2d72d4b2&originHeight=247&originWidth=586&originalType=binary&ratio=1.375&rotation=0&showTitle=false&size=26256&status=done&style=none&taskId=uf4beb453-16f5-4c6a-ae6f-916f0ac3a49&title=&width=426.1818181818182">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2023/png/35923527/1684806555660-1b005758-ba7b-4c87-a01e-6458f94660ea.png#averageHue=%232d2c2b&clientId=u3ad31785-20e4-4&from=paste&height=319&id=uc0a6c722&originHeight=438&originWidth=742&originalType=binary&ratio=1.375&rotation=0&showTitle=false&size=87050&status=done&style=none&taskId=ub6ada2e9-5527-4d47-a3a2-fab67b93ea4&title=&width=539.6363636363636">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2023/png/35923527/1684806561588-1705aeb8-cca7-4fef-9668-f9df5546999d.png#averageHue=%232e2c2b&clientId=u3ad31785-20e4-4&from=paste&height=304&id=udd13a1d0&originHeight=418&originWidth=610&originalType=binary&ratio=1.375&rotation=0&showTitle=false&size=63231&status=done&style=none&taskId=uf54c5312-2ee2-416f-a448-7c4d5695219&title=&width=443.6363636363636">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2023/png/35923527/1684895015975-9270d774-97b9-492a-a143-6bfdddcccf0a.png#averageHue=%23fdfbfa&clientId=uccde73ae-a5f5-4&from=paste&height=634&id=u3c7b2754&originHeight=697&originWidth=1098&originalType=binary&ratio=1.100000023841858&rotation=0&showTitle=false&size=61498&status=done&style=none&taskId=ufdfbe8cb-7055-4f38-b303-7169edd8a3d&title=&width=998.1817965468103">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2023/png/35923527/1684896216208-d24e73ac-d69b-4c14-95a9-92921d12187f.png#averageHue=%23374046&clientId=uccde73ae-a5f5-4&from=paste&height=105&id=u6f945738&originHeight=116&originWidth=544&originalType=binary&ratio=1.100000023841858&rotation=0&showTitle=false&size=13712&status=done&style=none&taskId=udb0aaf3c-34e2-40aa-979e-dd93fac924a&title=&width=494.5454438264707">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2023/png/35923527/1684987137712-62248f5d-8e4d-4326-be29-e762f74e84e4.png#averageHue=%23f4f4f4&clientId=u1bbb41f4-3f51-4&from=paste&height=295&id=u3dd841e8&originHeight=405&originWidth=2114&originalType=binary&ratio=1.375&rotation=0&showTitle=false&size=87776&status=done&style=none&taskId=u489927ce-db26-4133-a723-d5bb08aeb3b&title=&width=1537.4545454545455">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2023/png/35923527/1684987776986-35a72c54-74c1-49f3-abc0-b35047127d67.png#averageHue=%23fefdfc&clientId=u1bbb41f4-3f51-4&from=paste&height=289&id=uc226ac2d&originHeight=578&originWidth=846&originalType=binary&ratio=1.375&rotation=0&showTitle=false&size=59682&status=done&style=none&taskId=u5ff4f63e-bb0d-4a5c-9cfe-b976253cc5b&title=&width=423">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2023/png/35923527/1684831300245-3f2603e9-59d3-455f-b720-ad892014400b.png#averageHue=%23fcfbfa&clientId=u0918ef5a-1737-4&from=paste&height=34&id=u522df07b&originHeight=47&originWidth=252&originalType=binary&ratio=1.375&rotation=0&showTitle=false&size=2324&status=done&style=none&taskId=u6a9499b0-28ed-4036-b33c-3be478ccf43&title=&width=183.27272727272728">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2023/png/35923527/1684831627163-7f32716a-2c9a-4474-a21c-6f0adade7ef2.png#averageHue=%23f9f4f4&clientId=u0918ef5a-1737-4&from=paste&height=31&id=ueec57683&originHeight=42&originWidth=220&originalType=binary&ratio=1.375&rotation=0&showTitle=false&size=2396&status=done&style=none&taskId=u36c1ed60-051c-4e9a-861e-ad5aed5ae7f&title=&width=160">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2023/png/35923527/1684831672371-bea2bb6f-5336-49ea-a912-a81c6e2cafbb.png#averageHue=%23f8f8f8&clientId=u0918ef5a-1737-4&from=paste&height=292&id=uc2a4c6a4&originHeight=401&originWidth=669&originalType=binary&ratio=1.375&rotation=0&showTitle=false&size=32086&status=done&style=none&taskId=u13708d9c-e0d7-4b6f-933b-155c441e61f&title=&width=486.54545454545456">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2023/png/35923527/1684832193386-b9d298cf-01e6-42aa-87bd-639f220e6419.png#averageHue=%23f9f8f8&clientId=u0918ef5a-1737-4&from=paste&height=543&id=u515b68ea&originHeight=747&originWidth=1654&originalType=binary&ratio=1.375&rotation=0&showTitle=false&size=101543&status=done&style=none&taskId=uc5059db4-0ed7-47a6-aabb-e02a49de861&title=&width=1202.909090909091">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2023/png/35923527/1684835390931-2c862064-bb7a-4ef5-b25e-d3714d48aa39.png#averageHue=%2310161c&clientId=u0918ef5a-1737-4&from=paste&height=489&id=u5b07530d&originHeight=673&originWidth=1121&originalType=binary&ratio=1.375&rotation=0&showTitle=false&size=59663&status=done&style=none&taskId=u59091839-d605-4dba-af19-04de273e00e&title=&width=815.2727272727273">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2023/png/35923527/1684836740368-5f3ca459-1a41-4240-8d83-cbe31d1a951d.png#averageHue=%233b4044&clientId=u0918ef5a-1737-4&from=paste&height=246&id=u04f864de&originHeight=338&originWidth=354&originalType=binary&ratio=1.375&rotation=0&showTitle=false&size=17875&status=done&style=none&taskId=u08b18b34-660f-4b3a-8e32-64b6a646226&title=&width=257.45454545454544">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2023/png/35923527/1684836774095-61cbfae6-bedc-44a7-85c6-0d88cde61e40.png#averageHue=%23504c42&clientId=u0918ef5a-1737-4&from=paste&height=133&id=u62afcae1&originHeight=183&originWidth=361&originalType=binary&ratio=1.375&rotation=0&showTitle=false&size=8307&status=done&style=none&taskId=uf0930859-5114-4d92-8be1-cbc464f976d&title=&width=262.54545454545456">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2023/png/35923527/1684837323956-3f436382-7d1b-42f9-be1f-9c9e4f520693.png#averageHue=%23f7f4f0&clientId=u0918ef5a-1737-4&from=paste&height=47&id=u9a12a7d6&originHeight=64&originWidth=332&originalType=binary&ratio=1.375&rotation=0&showTitle=false&size=5818&status=done&style=none&taskId=ucc6e7a82-8521-45b4-987d-ee56d540bd4&title=&width=241.45454545454547">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2023/png/35923527/1684837535874-db0846f1-2edf-4452-a6e4-9be3d252e098.png#averageHue=%23f4f0eb&clientId=u2e175b83-982d-4&from=paste&height=62&id=u3e18fde7&originHeight=85&originWidth=648&originalType=binary&ratio=1.375&rotation=0&showTitle=false&size=12970&status=done&style=none&taskId=u0ca56967-30ca-4a53-9145-af931ce0b63&title=&width=471.27272727272725">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2023/png/35923527/1684844207261-0bf1bbba-496f-4b46-b2c4-aead6f790b54.png#averageHue=%23f9f9f9&clientId=u2e175b83-982d-4&from=paste&height=496&id=u0aea1ada&originHeight=682&originWidth=714&originalType=binary&ratio=1.375&rotation=0&showTitle=false&size=51050&status=done&style=none&taskId=uef231a0a-65e8-48cb-acb7-d8df0d93300&title=&width=519.2727272727273">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2023/png/35923527/1684844255784-2efcc288-1d24-4c97-9428-fabbcb92bb3a.png#averageHue=%23fbfaf9&clientId=u2e175b83-982d-4&from=paste&height=158&id=u8896f029&originHeight=217&originWidth=1092&originalType=binary&ratio=1.375&rotation=0&showTitle=false&size=26932&status=done&style=none&taskId=ud83106e9-8cbf-46a5-9489-38bfd9498f2&title=&width=794.1818181818181">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2023/png/35923527/1684844392782-aba674a6-efb4-4ba3-8cba-e8827e18c894.png#averageHue=%232f2d2c&clientId=u2e175b83-982d-4&from=paste&height=80&id=u59226d5e&originHeight=110&originWidth=440&originalType=binary&ratio=1.375&rotation=0&showTitle=false&size=18988&status=done&style=none&taskId=ue29b1866-a4ee-40cf-a71b-883ea06b7d2&title=&width=320">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2023/png/35923527/1684845068843-4eee72ff-500b-4254-8507-6088f7b811d7.png#averageHue=%23f1f0ef&clientId=u2e175b83-982d-4&from=paste&height=100&id=u60c9f64c&originHeight=137&originWidth=341&originalType=binary&ratio=1.375&rotation=0&showTitle=false&size=5031&status=done&style=none&taskId=uf304f8d1-c7b9-429c-ac8f-0649f81f85e&title=&width=248">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2023/png/35923527/1684845112001-a0d0adb6-46b3-4c13-85e9-acfece450f6a.png#averageHue=%23fefdfd&clientId=u2e175b83-982d-4&from=paste&height=108&id=u6ed2c870&originHeight=148&originWidth=593&originalType=binary&ratio=1.375&rotation=0&showTitle=false&size=34857&status=done&style=none&taskId=uefe467ed-9f47-4b48-8c8c-43d50261dfb&title=&width=431.27272727272725">
<meta property="article:published_time" content="2023-05-29T07:40:00.000Z">
<meta property="article:modified_time" content="2023-05-29T07:41:04.972Z">
<meta property="article:author" content="Miykah">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.nlark.com/yuque/0/2023/jpeg/35923527/1684760655076-b1a34046-4dec-4faa-b662-51c3550ed56c.jpeg">
    
    
    <!--- Icon Part-->
    <link rel="icon" type="image/png" href="https://miykah-imagebed.oss-cn-chengdu.aliyuncs.com/img/202305261446083.jpg" sizes="192x192">
    <link rel="apple-touch-icon" sizes="180x180" href="https://miykah-imagebed.oss-cn-chengdu.aliyuncs.com/img/202305261446083.jpg">
    <meta name="theme-color" content="#488FB5">
    <link rel="shortcut icon" href="https://miykah-imagebed.oss-cn-chengdu.aliyuncs.com/img/202305261446083.jpg">
    <!--- Page Info-->
    
    <title>
        
            接口开放平台项目总结 -
        
        Miykah&#39;s Zone
    </title>
    
<link rel="stylesheet" href="/css/style.css">

    <link rel="stylesheet" href="//npm.elemecdn.com/hexo-theme-redefine@2.1.4/source/assets/fonts.css">
    <!--- Font Part-->
    
    
    
        <link href="" rel="stylesheet">
    
    

    <!--- Inject Part-->
    
    <script id="hexo-configurations">
    let Global = window.Global || {};
    Global.hexo_config = {"hostname":"miykah.top","root":"/","language":"zh-CN","path":"search.json"};
    Global.theme_config = {"articles":{"style":{"font_size":"16px","line_height":1.5,"image_border_radius":"14px","image_alignment":"center","image_caption":false,"link_icon":true},"word_count":{"enable":true,"count":true,"min2read":true},"author_label":{"enable":true,"auto":false,"list":["炼气","筑基","结丹","元婴","化神"]},"code_block":{"copy":true,"style":"mac","font":{"enable":false,"family":null,"url":null}},"toc":{"enable":true,"max_depth":6,"number":false,"expand":true,"init_open":true},"copyright":false,"lazyload":true,"recommendation":{"enable":false,"title":"推荐阅读","limit":3,"placeholder":"/images/wallhaven-wqery6-light.webp","skip_dirs":[]}},"colors":{"primary":"#488FB5","secondary":null},"global":{"fonts":{"chinese":{"enable":true,"family":null,"url":null},"english":{"enable":false,"family":null,"url":null}},"content_max_width":"1000px","sidebar_width":"300px","hover":{"shadow":true,"scale":true},"scroll_progress":{"bar":false,"percentage":true},"busuanzi_counter":{"enable":true,"site_pv":true,"site_uv":true,"post_pv":true},"pjax":true,"open_graph":true,"google_analytics":{"enable":false,"id":null}},"home_banner":{"enable":true,"style":"fixed","image":{"light":"/images/bg-light.webp","dark":"/images/bg-dark.webp"},"title":"With no fear in my heart,  god comes into my mind.","subtitle":{"text":["一闪一闪亮晶晶","好像你的身体","藏在众多孤星之中","还是找得到你","挂在天放光明","反射我的孤寂","提醒我 我也只是一颗寂寞的星星"],"hitokoto":{"enable":false,"api":"https://v1.hitokoto.cn"},"typing_speed":100,"backing_speed":80,"starting_delay":500,"backing_delay":1500,"loop":true,"smart_backspace":true},"text_color":{"light":"#fff","dark":"#d1d1b6"},"text_style":{"title_size":"2.8rem","subtitle_size":"1.5rem","line_height":1.2},"custom_font":{"enable":false,"family":null,"url":null},"social_links":{"enable":true,"links":{"github":"https://github.com/Miykah","instagram":null,"zhihu":null,"twitter":null,"email":"miykah@163.com"}}},"plugins":{"feed":{"enable":false},"aplayer":{"enable":false,"type":"fixed","audios":[{"name":null,"artist":null,"url":null,"cover":null}]},"mermaid":{"enable":false,"version":"9.3.0"}},"version":"2.1.4","navbar":{"auto_hide":true,"color":{"left":"#f78736","right":"#367df7","transparency":10},"links":{"Home":{"path":"/","icon":"fa-regular fa-house"},"Archives":{"path":"/archives","icon":"fa-regular fa-archive"},"Tags":{"path":"/tags","icon":"fa-regular fa-tag"},"Categories":{"path":"/categories","icon":"fa-regular fa-folder"},"Links":{"path":"/links","icon":"fa-regular fa-user-group"},"说说":{"path":"/shuoshuo","icon":"fa-regular fa-message"},"About":{"icon":"fa-regular fa-user","submenus":{"Me":"/about","Github":"https://github.com/Miykah","Blog":"https://miykah.top/","Friends":"/links"}}},"search":{"enable":true,"preload":true}},"page_templates":{"friends_column":2,"tags_style":"blur"},"home":{"sidebar":{"enable":true,"position":"right","first_item":"menu","announcement":"好好学习 天天向上","links":{"归档":{"path":"/archives","icon":"fa-regular fa-archive"},"标签":{"path":"/tags","icon":"fa-regular fa-tags"},"分类":{"path":"/categories","icon":"fa-regular fa-folder"},"说说":{"path":"/shuoshuo","icon":"fa-regular fa-folder"}}},"article_date_format":"auto","categories":{"enable":true,"limit":3},"tags":{"enable":true,"limit":5}}};
    Global.language_ago = {"second":"%s 秒前","minute":"%s 分钟前","hour":"%s 小时前","day":"%s 天前","week":"%s 周前","month":"%s 个月前","year":"%s 年前"};
    Global.data_config = {"masonry":false};
  </script>
    
    <!--- Fontawesome Part-->
    <link rel="stylesheet" href="//npm.elemecdn.com/hexo-theme-redefine@2.1.4/source/fontawesome/fontawesome.min.css">
    <link rel="stylesheet" href="//npm.elemecdn.com/hexo-theme-redefine@2.1.4/source/fontawesome/brands.min.css">
    <link rel="stylesheet" href="//npm.elemecdn.com/hexo-theme-redefine@2.1.4/source/fontawesome/solid.min.css">
    <link rel="stylesheet" href="//npm.elemecdn.com/hexo-theme-redefine@2.1.4/source/fontawesome/regular.min.css">
    
    
    
    
<meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="Miykah's Zone" type="application/atom+xml">
</head>


<body>
<div class="progress-bar-container">
    

    
        <span class="pjax-progress-bar"></span>
        <span class="pjax-progress-icon">
            <i class="fa-solid fa-circle-notch fa-spin"></i>
        </span>
    
</div>


<main class="page-container">

    

    <div class="main-content-container">

        <div class="main-content-header">
            <header class="navbar-container">
    
    <div class="navbar-content">
        <div class="left">
            
            <a class="logo-title" href="/">
                
                Miykah&#39;s Zone
                
            </a>
        </div>

        <div class="right">
            <!-- PC -->
            <div class="desktop">
                <ul class="navbar-list">
                    
                        
                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class="" 
                                    href="/"  >
                                    
                                        
                                            <i class="fa-regular fa-house"></i>
                                        
                                        首页
                                    
                                </a>
                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class="" 
                                    href="/archives"  >
                                    
                                        
                                            <i class="fa-regular fa-archive"></i>
                                        
                                        归档
                                    
                                </a>
                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class="" 
                                    href="/tags"  >
                                    
                                        
                                            <i class="fa-regular fa-tag"></i>
                                        
                                        标签
                                    
                                </a>
                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class="" 
                                    href="/categories"  >
                                    
                                        
                                            <i class="fa-regular fa-folder"></i>
                                        
                                        分类
                                    
                                </a>
                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class="" 
                                    href="/links"  >
                                    
                                        
                                            <i class="fa-regular fa-user-group"></i>
                                        
                                        链接
                                    
                                </a>
                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class="" 
                                    href="/shuoshuo"  >
                                    
                                        
                                            <i class="fa-regular fa-message"></i>
                                        
                                        说说
                                    
                                </a>
                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class="has-dropdown" 
                                    href="#" onClick="return false;">
                                    
                                        
                                            <i class="fa-regular fa-user"></i>
                                        
                                        关于&nbsp;<i class="fa-solid fa-chevron-down"></i>
                                    
                                </a>
                                <!-- Submenu -->
                                
                                    <ul class="sub-menu">
                                    
                                        <li>
                                        <a href="/about">ME
                                        </a>
                                        </li>
                                    
                                        <li>
                                        <a target="_blank" rel="noopener" href="https://github.com/Miykah">GITHUB
                                        </a>
                                        </li>
                                    
                                        <li>
                                        <a href="https://miykah.top/">BLOG
                                        </a>
                                        </li>
                                    
                                        <li>
                                        <a href="/links">友情链接
                                        </a>
                                        </li>
                                    
                                    </ul>
                                
                            </li>
                    
                    
                        <li class="navbar-item search search-popup-trigger">
                            <i class="fa-solid fa-magnifying-glass"></i>
                        </li>
                    
                </ul>
            </div>
            <!-- Mobile -->
            <div class="mobile">
                
                    <div class="icon-item search search-popup-trigger"><i class="fa-solid fa-magnifying-glass"></i></div>
                
                <div class="icon-item navbar-bar">
                    <div class="navbar-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Mobile drawer -->
    <div class="navbar-drawer">
        <ul class="drawer-navbar-list">
            
                
                    <li class="drawer-navbar-item flex-center">
                        <a class="" 
                        href="/"  >
                             
                                
                                    <i class="fa-regular fa-house"></i>
                                
                                首页
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                    
            
                
                    <li class="drawer-navbar-item flex-center">
                        <a class="" 
                        href="/archives"  >
                             
                                
                                    <i class="fa-regular fa-archive"></i>
                                
                                归档
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                    
            
                
                    <li class="drawer-navbar-item flex-center">
                        <a class="" 
                        href="/tags"  >
                             
                                
                                    <i class="fa-regular fa-tag"></i>
                                
                                标签
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                    
            
                
                    <li class="drawer-navbar-item flex-center">
                        <a class="" 
                        href="/categories"  >
                             
                                
                                    <i class="fa-regular fa-folder"></i>
                                
                                分类
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                    
            
                
                    <li class="drawer-navbar-item flex-center">
                        <a class="" 
                        href="/links"  >
                             
                                
                                    <i class="fa-regular fa-user-group"></i>
                                
                                链接
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                    
            
                
                    <li class="drawer-navbar-item flex-center">
                        <a class="" 
                        href="/shuoshuo"  >
                             
                                
                                    <i class="fa-regular fa-message"></i>
                                
                                说说
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                    
            
                
                    <li class="drawer-navbar-item flex-center">
                        <a class="has-dropdown" 
                        href="#" onClick="return false;">
                            
                                
                                    <i class="fa-regular fa-user"></i>
                                
                                关于&nbsp;<i class="fa-solid fa-chevron-down"></i>
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                              
                        
                            <li class="dropdown-item flex-center">
                                <a class="dropdown-item" href="/about">ME</a>
                            </li>
                        
                            <li class="dropdown-item flex-center">
                                <a class="dropdown-item" target="_blank" rel="noopener" href="https://github.com/Miykah">GITHUB</a>
                            </li>
                        
                            <li class="dropdown-item flex-center">
                                <a class="dropdown-item" href="https://miykah.top/">BLOG</a>
                            </li>
                        
                            <li class="dropdown-item flex-center">
                                <a class="dropdown-item" href="/links">友情链接</a>
                            </li>
                        
                    
            

        </ul>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="main-content-body">

            

            <div class="main-content">

                
                    <div class="fade-in-down-animation">
    <div class="post-page-container">
        <div class="article-content-container">

            
            
                <div class="article-title">
                    <h1 class="article-title-regular">接口开放平台项目总结</h1>
                </div>
            
                
            

            
                <div class="article-header">
                    <div class="avatar">
                        <img src="https://miykah-imagebed.oss-cn-chengdu.aliyuncs.com/img/blog-avatar.webp">
                    </div>
                    <div class="info">
                        <div class="author">
                            <span class="name">Miykah</span>
                            
                                <span class="author-label">炼气</span>
                            
                        </div>
                        <div class="meta-info">
                            <div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fa-regular fa-pen-fancy"></i>&nbsp;
        <span class="desktop">2023-05-29 15:40</span>
        <span class="mobile">2023-05-29 15:40</span>
        <span class="hover-info">创建</span>
    </span>
    
        <span class="article-date article-meta-item">
            <i class="fa-regular fa-wrench"></i>&nbsp;
            <span class="desktop">2023-05-29 15:41:04</span>
            <span class="mobile">2023-05-29 15:41</span>
            <span class="hover-info">更新</span>
        </span>
    

    
    

    
    
        <span class="article-wordcount article-meta-item">
            <i class="fa-regular fa-typewriter"></i>&nbsp;<span>5.4k 字</span>
        </span>
    
    
        <span class="article-min2read article-meta-item">
            <i class="fa-regular fa-clock"></i>&nbsp;<span>23 分钟</span>
        </span>
    
    
        <span class="article-pv article-meta-item">
            <i class="fa-regular fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span>
        </span>
    
</div>

                        </div>
                    </div>
                </div>
            

            <div class="article-content markdown-body">
                <h1 id="项目背景"><a href="#项目背景" class="headerlink" title="项目背景"></a>项目背景</h1><blockquote>
<p>设想：这是API开放平台，而不是API管理平台。面试官可能会说，可以使用已有的如Swagger这样的API管理，为什么还要开发？<br>API开放平台和管理平台不一样。开放平台，管理员发布接口，用户可以申请开通接口，开通之后接口调用次数可以有限制。<br>怎么考虑结合大项目讲？<br>大项目的健康管理平台会给很多企业使用，大项目可以做二次开发出前端界面，需要调用一些接口。企业人员可以自己进行二次开发，我们（学生）后续也可以提供一些接口，供企业二次开发使用。所以可以使用API开放平台进行接口的发布，客户（企业）开通接口权限。</p>
</blockquote>
<p>大型旋转机组健康管理系统软件衍生项目，为业务人员二次开发提供接口的开放平台。管理员负责提供接口并发布上线接口，可视化统计接口调用情况。业务人员（用户）可以申请接口调用权限后，进行接口在线测试，在用户进行二次开发时，通过引入客户端SDK可以方便地调用接口。</p>
<h1 id="主要功能"><a href="#主要功能" class="headerlink" title="主要功能"></a>主要功能</h1><ul>
<li>API接入</li>
<li>接口在线测试</li>
<li>防止攻击（安全性、ak &#x2F; sk鉴权）</li>
<li>限制调用次数</li>
<li>统计调用次数</li>
<li>流量保护</li>
<li>提供SDK便于业务人员调用接口</li>
</ul>
<h1 id="主要技术选型"><a href="#主要技术选型" class="headerlink" title="主要技术选型"></a>主要技术选型</h1><ul>
<li>后端<ul>
<li>Spring Boot</li>
<li>MySQL</li>
<li>MyBatis-Plus</li>
<li>API 签名认证</li>
<li>Spring Cloud Gateway</li>
<li>Dubbo</li>
<li>Nacos</li>
<li>Spring Boot Starter</li>
</ul>
</li>
<li>前端<ul>
<li>React</li>
<li>Ant Design Pro</li>
</ul>
</li>
</ul>
<h1 id="架构图"><a href="#架构图" class="headerlink" title="架构图"></a>架构图</h1><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.nlark.com/yuque/0/2023/jpeg/35923527/1684760655076-b1a34046-4dec-4faa-b662-51c3550ed56c.jpeg"
                     
                ></p>
<h1 id="后端项目划分"><a href="#后端项目划分" class="headerlink" title="后端项目划分"></a>后端项目划分</h1><ul>
<li>phmapi-backend：7529端口，后端主项目</li>
<li>phmapi-gateway：8090端口，网关</li>
<li>phmapi-interface：8123端口，接口提供服务</li>
<li>phmapi-client-sdk：客户端SDK</li>
<li>phmapi-comon：公共模块</li>
</ul>
<h1 id="简历写法"><a href="#简历写法" class="headerlink" title="简历写法"></a>简历写法</h1><p><strong>项目名称：</strong>PHM在线接口开放平台<br><strong>上线地址：</strong><a class="link"   target="_blank" rel="noopener" href="http://139.155.144.134:8000/" >http://139.155.144.134:8000/ <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a><br><strong>项目介绍：</strong>大型旋转机组健康管理系统软件衍生项目，为业务人员二次开发提供接口的开放平台。管理员负责提供接口并发布上线接口，可视化统计接口调用情况。业务人员（用户）可以申请接口调用权限后，进行接口在线测试，在用户进行二次开发时，通过引入客户端SDK可以方便地调用接口。<br><strong>技术选型：</strong>Spring Boot + Spring Cloud Gateway + Dubbo + Nacos + MySQL + React<br><strong>主要工作：</strong></p>
<ol>
<li>根据项目业务需要，将项目拆分为web主项目、接口提供项目、公共模块、网关和客户端SDK；</li>
<li>自定义注解，结合 AOP 实现对后端方法的权限控制；同时使用 AOP 实现全局请求响应拦截器用于记录日志；</li>
<li>使用签名认证算法，为业务人员分配 accessKey 以及 secretKey 用于鉴权，防止接口被恶意调用，保证接口服务的安全性；</li>
<li>选用 Spring Cloud Gateway 作为项目的网关，实现路由转发及流量染色以保护接口服务，并使用全局过滤器集中处理用户调用接口时的签名校验、接口调用次数统计及限制等业务逻辑，提高安全性的同时、便于系统开发维护；</li>
<li>为了减少重复代码、提高代码的可重用性，将模型层以及部分业务层接口抽象为公共模块，满足主项目和网关的业务需求，并使用 Dubbo 框架实现这两个子项目间的远程调用；</li>
<li>基于 Spring Boot Starter 开发接口调用的SDK，业务人员可以通过引入 SDK 很方便地调用平台提供的开放接口，提高用户的开发体验。</li>
</ol>
<h1 id="项目遇到的问题"><a href="#项目遇到的问题" class="headerlink" title="项目遇到的问题"></a>项目遇到的问题</h1><h2 id="BUG解决"><a href="#BUG解决" class="headerlink" title="BUG解决"></a>BUG解决</h2><h3 id="数据源配置问题"><a href="#数据源配置问题" class="headerlink" title="数据源配置问题"></a>数据源配置问题</h3><blockquote>
<p>问题描述：抽取公共模块 <code>phmapi-common</code>时，common中引入了数据库相关的依赖（如MyBatis-plus和MyBatis），然后 <code>phmapi-gateway</code>项目引入了 <code>phmapi-common</code>, 但是 <code>phmapi-gateway</code> 并未在配置文件yml中配置数据源，application 启动时报错。</p>
</blockquote>
<div class="highlight-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Description:</span><br><span class="line"></span><br><span class="line">Failed to configure a DataSource: <span class="string">&#x27;url&#x27;</span> attribute is not specified and no embedded datasource could be configured.</span><br><span class="line"></span><br><span class="line">Reason: Failed to determine a suitable driver class</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Action:</span><br><span class="line"></span><br><span class="line">Consider the following:</span><br><span class="line">	If you want an embedded database (H2, HSQL or Derby), please put it on the classpath.</span><br><span class="line">	If you have database settings to be loaded from a particular profile you may need to activate it (no profiles are currently active).</span><br><span class="line"></span><br></pre></td></tr></table></figure></div>
<p><strong>解决办法</strong><br>在 <code>phmapi-gateway</code> 的启动类中排除数据源相关的类。</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication(exclude = &#123;</span></span><br><span class="line"><span class="meta">    DataSourceAutoConfiguration.class,</span></span><br><span class="line"><span class="meta">    DataSourceTransactionManagerAutoConfiguration.class,</span></span><br><span class="line"><span class="meta">    HibernateJpaAutoConfiguration.class&#125;)</span></span><br><span class="line"><span class="meta">@EnableDubbo</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PhmapiGatewayApplication</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(PhmapiGatewayApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<h3 id="点击调用接口，接口调用次数减了两次"><a href="#点击调用接口，接口调用次数减了两次" class="headerlink" title="点击调用接口，接口调用次数减了两次"></a>点击调用接口，接口调用次数减了两次</h3><blockquote>
<p>问题描述：对某个接口（getAllThings）点击测试调用的时候，调用统计中，调用次数加了两次，剩余次数减了两次。点击一次，次数却-2或+2，其余接口没有这个问题。</p>
</blockquote>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.nlark.com/yuque/0/2023/png/35923527/1684547540699-a48854eb-3d3b-4bb4-acfc-a0254183cb66.png#averageHue=%23fafafa&clientId=u6d9db1fc-ed8f-4&from=paste&height=516&id=uc78e05fe&originHeight=1032&originWidth=1391&originalType=binary&ratio=1.100000023841858&rotation=0&showTitle=false&size=88472&status=done&style=none&taskId=u97eeafe2-d365-4eb6-a1c7-14141c90764&title=&width=696"
                      alt="image.png"
                ><br>处理接口统计次数更新的逻辑在 <code>phmapi-gateway</code>项目中，在过滤器中处理。<br>DeBug发现更新次数的逻辑执行了两次。<br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.nlark.com/yuque/0/2023/png/35923527/1684547668578-46cc5d3b-7922-4153-86f7-0efa4f062da1.png#averageHue=%232d2c2b&clientId=u6d9db1fc-ed8f-4&from=paste&id=ufec5399d&originHeight=378&originWidth=909&originalType=binary&ratio=1.100000023841858&rotation=0&showTitle=false&size=45180&status=done&style=none&taskId=uf2f8fdcd-12a7-4c47-8de1-27a39293775&title="
                      alt="image.png"
                ><br><strong>发现打印日志中，接口返回的Response分了两次打印，第一次没打印完，第二次接着打印。</strong><br>**猜测可能是由于字符串的缓冲区不够，需要分两次或多次才能将response放到 **<code>**dataBuffer**</code>**？导致分了两次打印，导致执行了两次 **<code>**invokeCount**</code><strong>这个方法。</strong></p>
<blockquote>
<p><strong>有时候还会执行三次</strong></p>
</blockquote>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.nlark.com/yuque/0/2023/png/35923527/1684548141669-c8e3c969-5f1d-4535-850e-6e2ffe573c10.png#averageHue=%232d2c2c&clientId=u6d9db1fc-ed8f-4&from=paste&height=592&id=u41384d3f&originHeight=651&originWidth=1281&originalType=binary&ratio=1.100000023841858&rotation=0&showTitle=false&size=144125&status=done&style=none&taskId=uf311c62e-08fe-4fd8-87eb-c32389d9e47&title=&width=1164.545429304612"
                      alt="image.png"
                ><br><strong>解决办法：</strong></p>
<ul>
<li><strong>方法一：偷懒的办法，将逻辑提前，不放在处理日志里面</strong></li>
</ul>
<p>之所以将更新调用次数的逻辑写到记录日志的时候，是因为这个时候保证接口已经调用完成。<br>这里为了解决这个问题，偷个懒，把更新次数的逻辑提前。<br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.nlark.com/yuque/0/2023/png/35923527/1684548485733-06920ab4-5f1f-41bb-aea7-152a4f200ae9.png#averageHue=%232d2c2c&clientId=u6d9db1fc-ed8f-4&from=paste&id=ub2f64d4c&originHeight=370&originWidth=742&originalType=binary&ratio=1.100000023841858&rotation=0&showTitle=false&size=47634&status=done&style=none&taskId=uc0cae24f-8df5-485e-bcf7-1cebf454dfc&title="
                      alt="image.png"
                ></p>
<ul>
<li><strong>方法二：不改变原有逻辑</strong></li>
</ul>
<p>**使用一个 count 记录 **<code>**invokeCount**</code>**方法的调用次数，只允许 **<code>**invokeCount**</code><strong>调用一次。</strong><br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.nlark.com/yuque/0/2023/png/35923527/1684554712935-97d7643f-7f86-41fa-82c4-31d9f0c57f48.png#averageHue=%232c2c2b&clientId=u8e5aef47-feb7-4&from=paste&height=582&id=ue99bb8c6&originHeight=640&originWidth=1142&originalType=binary&ratio=1.100000023841858&rotation=0&showTitle=false&size=91234&status=done&style=none&taskId=u67559acd-8a22-4d24-b935-123da300177&title=&width=1038.1817956798338"
                      alt="image.png"
                ></p>
<h3 id="解决绕过网关请求接口问题"><a href="#解决绕过网关请求接口问题" class="headerlink" title="解决绕过网关请求接口问题"></a>解决绕过网关请求接口问题</h3><p><strong>问题描述：</strong><br>用户请求接口的地址必须是经过网关的。比如 <a class="link"   target="_blank" rel="noopener" href="http://172.28.9.61:8090/api/gas-turbine/things/" >http://172.28.9.61:8090/api/gas-turbine/things/ <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a><br><code>8090</code>就是项目的网管端口，然后经过网关鉴权后，会路由到项目提供接口的服务<a class="link"   target="_blank" rel="noopener" href="http://172.28.9.61:8123/api/gas-turbine/things/" >http://172.28.9.61:8123/api/gas-turbine/things/ <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a>。<br>**需要保证用户请求都必须经过网关，但如果用户得知了接口服务的端口 **<code>**8123**</code><strong>，就可能会绕过网关直接请求到接口，也就绕过了鉴权、计数等一系列流程。</strong></p>
<p><strong>解决办法：</strong><br>利用网关的 <code>filters</code>做一个<strong>流量染色</strong>。给转发到接口服务的请求加上请求头标识这个请求是来自网关，接口服务取出请求头进行判断。</p>
<ul>
<li><p>对于 <code>phmapi-gateway</code>项目，在 <code>application.yml</code>中添加配置：</p>
<div class="highlight-container" data-rel="Yaml"><figure class="iseeu highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="attr">routes:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">api_route</span></span><br><span class="line">          <span class="attr">uri:</span> <span class="string">http://172.28.9.61:8123</span></span><br><span class="line">          <span class="attr">predicates:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">Path=/api/**</span></span><br><span class="line">          <span class="attr">filters:</span></span><br><span class="line">            <span class="string">//</span> <span class="string">添加请求头(</span> <span class="string">Request-source</span> <span class="string">=</span> <span class="string">gateway</span> <span class="string">)</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">AddRequestHeader=Request-source,</span> <span class="string">gateway</span></span><br></pre></td></tr></table></figure></div>
</li>
<li><p>对于接口服务 <code>phmapi-interface</code>，取出请求头判断是否来自网关，如果不是来自网关则返回空。</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/things&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getAllThing</span><span class="params">(HttpServletRequest request)</span> &#123;</span><br><span class="line">    <span class="comment">//校验请求是否来自网关</span></span><br><span class="line">    <span class="type">boolean</span> <span class="variable">isFromGateway</span> <span class="operator">=</span> authUtil.auth(request);</span><br><span class="line">    <span class="keyword">if</span> (!isFromGateway) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">// 调用接口</span></span><br><span class="line">        <span class="type">HttpResponse</span> <span class="variable">response</span> <span class="operator">=</span> HttpRequest.get(<span class="string">&quot;http://202.202.3.68:52310/gateway/api/v2/thing-operator/namespaces/cqu-edu/projects/gas-turbine-engine-phm/things&quot;</span>)</span><br><span class="line">        						.execute();</span><br><span class="line">        <span class="keyword">return</span> response.body();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AuthUtil</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">REQUEST_SOURCE_HEADER</span> <span class="operator">=</span> <span class="string">&quot;gateway&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">auth</span><span class="params">(HttpServletRequest request)</span> &#123;</span><br><span class="line">        <span class="comment">// 取出请求头判断是否等于 &quot;gateway&quot;</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">header</span> <span class="operator">=</span> request.getHeader(<span class="string">&quot;Request-source&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> header != <span class="literal">null</span> &amp;&amp; header.equals(REQUEST_SOURCE_HEADER);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></li>
</ul>
<h3 id="前端BUG：用户头像加载不出来，导致弹不出退出登录"><a href="#前端BUG：用户头像加载不出来，导致弹不出退出登录" class="headerlink" title="前端BUG：用户头像加载不出来，导致弹不出退出登录"></a>前端BUG：用户头像加载不出来，导致弹不出退出登录</h3><p><strong>问题描述：</strong><br>用户头像一直转圈，导致弹不出退出登录按钮，无法退出登录。<br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.nlark.com/yuque/0/2023/png/35923527/1684805821617-0d5d4be0-bf58-4365-9282-65a51b13d9d7.png#averageHue=%23f4f4f4&clientId=u3ad31785-20e4-4&from=paste&height=217&id=u8a99bc9b&originHeight=299&originWidth=569&originalType=binary&ratio=1.375&rotation=0&showTitle=false&size=6244&status=done&style=none&taskId=u7f0c36f0-d8a0-4790-8f28-4f401282fb6&title=&width=413.8181818181818"
                      alt="image.png"
                ><br><strong>解决办法：</strong><br>找了一些解决办法<br>（1）用户没有userName（但我的有）（2）用户头像userAvatar属性没有值，我给用户的avatar图片地址后仍然不行。<br>最后找到问题原因：<br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.nlark.com/yuque/0/2023/png/35923527/1684806148066-0d1d39f4-c1fe-4acc-82d1-1a598c8da821.png#averageHue=%232d2c2c&clientId=u3ad31785-20e4-4&from=paste&height=180&id=u2d72d4b2&originHeight=247&originWidth=586&originalType=binary&ratio=1.375&rotation=0&showTitle=false&size=26256&status=done&style=none&taskId=uf4beb453-16f5-4c6a-ae6f-916f0ac3a49&title=&width=426.1818181818182"
                      alt="image.png"
                ><br><code>src/components/RightContent/AvaratDropdown.tsx</code> 文件中，登录用户使用的是 Ant Design Pro 自己定义的 <code>currentUser</code> ，而我们应该使用 <code>loginUser</code>，将该文件中的 <code>currentUser</code> 全部替换成 <code>loginUser</code> 后解决问题。</p>
<h3 id="前端BUG：点击退出登录后，不跳转到登录页面"><a href="#前端BUG：点击退出登录后，不跳转到登录页面" class="headerlink" title="前端BUG：点击退出登录后，不跳转到登录页面"></a>前端BUG：点击退出登录后，不跳转到登录页面</h3><p><strong>问题描述：</strong><br>在解决上一个BUG后，可以点击退出登录，退出登录功能也没问题，但是不会自动跳转到登录页面，而是仍然停留在当前页面（虽然这个时候点击任何东西后，会检测到没有登录，再跳转到登录页面）。<br>但我需要一点击退出登录，就自动跳转到登录页面。<br><strong>解决办法：</strong><br>问题所在仍然是<code>src/components/RightContent/AvaratDropdown.tsx</code> 文件，点击退出登录按钮的逻辑问题。<br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.nlark.com/yuque/0/2023/png/35923527/1684806555660-1b005758-ba7b-4c87-a01e-6458f94660ea.png#averageHue=%232d2c2b&clientId=u3ad31785-20e4-4&from=paste&height=319&id=uc0a6c722&originHeight=438&originWidth=742&originalType=binary&ratio=1.375&rotation=0&showTitle=false&size=87050&status=done&style=none&taskId=ub6ada2e9-5527-4d47-a3a2-fab67b93ea4&title=&width=539.6363636363636"
                      alt="image.png"
                ><br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.nlark.com/yuque/0/2023/png/35923527/1684806561588-1705aeb8-cca7-4fef-9668-f9df5546999d.png#averageHue=%232e2c2b&clientId=u3ad31785-20e4-4&from=paste&height=304&id=udd13a1d0&originHeight=418&originWidth=610&originalType=binary&ratio=1.375&rotation=0&showTitle=false&size=63231&status=done&style=none&taskId=uf54c5312-2ee2-416f-a448-7c4d5695219&title=&width=443.6363636363636"
                      alt="image.png"
                ></p>
<h2 id="漏洞解决"><a href="#漏洞解决" class="headerlink" title="漏洞解决"></a>漏洞解决</h2><blockquote>
<p>部署到云服务器之后，发现有5个安全漏洞。<br>需要根据修复方案自行修复</p>
</blockquote>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.nlark.com/yuque/0/2023/png/35923527/1684895015975-9270d774-97b9-492a-a143-6bfdddcccf0a.png#averageHue=%23fdfbfa&clientId=uccde73ae-a5f5-4&from=paste&height=634&id=u3c7b2754&originHeight=697&originWidth=1098&originalType=binary&ratio=1.100000023841858&rotation=0&showTitle=false&size=61498&status=done&style=none&taskId=ufdfbe8cb-7055-4f38-b303-7169edd8a3d&title=&width=998.1817965468103"
                      alt="image.png"
                ></p>
<h3 id="Apache-Dubbo-漏洞修复"><a href="#Apache-Dubbo-漏洞修复" class="headerlink" title="Apache Dubbo 漏洞修复"></a>Apache Dubbo 漏洞修复</h3><p>将 Apache Dubbo 3.0.9 升级到 3.0.14 及以上版本</p>
<div class="highlight-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- dubbo --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.dubbo<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>dubbo<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.14<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></div>
<h3 id="FasterXML-jackson-databind-漏洞修复"><a href="#FasterXML-jackson-databind-漏洞修复" class="headerlink" title="FasterXML jackson-databind 漏洞修复"></a>FasterXML jackson-databind 漏洞修复</h3><p>查看 Maven 依赖发现是 Nacos 依赖了 FasterXML jackson-databind 2.13.3。<br>需要排除掉 Nacos 中的 jackson-databind 和 jackson-core 2.13.3 依赖，自己引入 2.14.0 以上版本</p>
<div class="highlight-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- nacos 注册中心 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.nacos<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>nacos-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 排除掉nacos依赖的有高危漏洞的2.13jackson，自己引入 2.14.0以上的  --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-databind<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-databind --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-databind<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.14.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></div>
<h3 id="Spring-Framework-身份认证绕过漏洞"><a href="#Spring-Framework-身份认证绕过漏洞" class="headerlink" title="Spring Framework 身份认证绕过漏洞"></a><strong>Spring Framework 身份认证绕过漏洞</strong></h3><p>发现是 spring-webmvc-5.3.20 的问题，查看 Maven 依赖，是 spring-boot-starter-web:2.7.0 引入。<br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.nlark.com/yuque/0/2023/png/35923527/1684896216208-d24e73ac-d69b-4c14-95a9-92921d12187f.png#averageHue=%23374046&clientId=uccde73ae-a5f5-4&from=paste&height=105&id=u6f945738&originHeight=116&originWidth=544&originalType=binary&ratio=1.100000023841858&rotation=0&showTitle=false&size=13712&status=done&style=none&taskId=udb0aaf3c-34e2-40aa-979e-dd93fac924a&title=&width=494.5454438264707"
                      alt="image.png"
                ><br>直接将项目的 spring boot 版本升级到 2.7.11</p>
<div class="highlight-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br></pre></td></tr></table></figure></div>
<p>但升级之后下载不到 mysql-connector-java 的 jar包，因为我们没有指定版本。<br>手动指定 mysql-connector-java 的版本即可解决</p>
<div class="highlight-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- mysql--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--为了修复Spring Framework漏洞 将Spring boot版本升到2.7.11后，</span></span><br><span class="line"><span class="comment">  mysql-connector-java 找不到，只能指定版本--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.31<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></div>
<h1 id="项目优化"><a href="#项目优化" class="headerlink" title="项目优化"></a>项目优化</h1><h2 id="网关返回自定义值"><a href="#网关返回自定义值" class="headerlink" title="网关返回自定义值"></a>网关返回自定义值</h2><p>原本网关鉴权等流程如果没有通过，会进入到网关的 <code>handleNoAuth</code> 等方法。</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> Mono&lt;Void&gt; <span class="title function_">handleNoAuth</span><span class="params">(ServerHttpResponse response)</span> &#123; </span><br><span class="line">    response.setStatusCode(HttpStatus.FORBIDDEN); </span><br><span class="line">    <span class="keyword">return</span> response.setComplete(); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p>如果这样的话最终返回到 backend 时，很难判断到底有没有请求成功（因为是根据返回的字符串是否为空判断）。所以如果请求失败，返回一个错误页面（字符串不为空），也会弹出请求成功的提示框。<br>为了解决这个问题，在网关自定义返回值 JSONObject，同时各个接口也统一返回值为 JSONObject。<br>如果请求成功，返回的是接口的 JSONObject，如果遇到无权限等情况，网关也会返回 JSONObject。<br>后端再根据响应的字符串body，反序列化成 JSONObject，判断自定义的 JSONObject 的 code 字段是否正常，来判断是否请求成功。</p>
<ul>
<li><strong>网关层：</strong></li>
</ul>
<p>参考：<a class="link"   target="_blank" rel="noopener" href="https://blog.csdn.net/qq_37312208/article/details/119996202" >https://blog.csdn.net/qq_37312208&#x2F;article&#x2F;details&#x2F;119996202 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a><br><a class="link"   target="_blank" rel="noopener" href="https://www.cnblogs.com/wangbin96/p/12531935.html" >https://www.cnblogs.com/wangbin96/p/12531935.html <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> Mono&lt;Void&gt; <span class="title function_">handleNoAuth</span><span class="params">(ServerHttpResponse response)</span> &#123;</span><br><span class="line">    <span class="comment">// 使用 Hutool 工具类，创建一个 JSONObject</span></span><br><span class="line">    <span class="type">JSONObject</span> <span class="variable">result</span> <span class="operator">=</span> JSONUtil.createObj();</span><br><span class="line">    result.set(<span class="string">&quot;code&quot;</span>, -<span class="number">1</span>);</span><br><span class="line">    result.set(<span class="string">&quot;message&quot;</span>, <span class="string">&quot;无权限！&quot;</span>);</span><br><span class="line">    <span class="type">byte</span>[] bytes = JSONUtil.toJsonStr(result).getBytes(StandardCharsets.UTF_8);</span><br><span class="line">    response.getHeaders().setContentType(MediaType.APPLICATION_JSON);</span><br><span class="line">    response.setStatusCode(HttpStatus.UNAUTHORIZED);</span><br><span class="line">    <span class="type">DataBuffer</span> <span class="variable">buffer</span> <span class="operator">=</span> response.bufferFactory().wrap(bytes);</span><br><span class="line">    <span class="keyword">return</span> response.writeWith(Mono.just(buffer));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<ul>
<li><p><strong>接口服务：</strong></p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/things&quot;)</span></span><br><span class="line"><span class="keyword">public</span> JSONObject <span class="title function_">getAllThing</span><span class="params">(HttpServletRequest request)</span> &#123;</span><br><span class="line">    <span class="comment">//校验请求是否来自网关</span></span><br><span class="line">    <span class="type">boolean</span> <span class="variable">isFromGateway</span> <span class="operator">=</span> authUtil.auth(request);</span><br><span class="line">    <span class="keyword">if</span> (!isFromGateway) &#123;</span><br><span class="line">        <span class="type">JSONObject</span> <span class="variable">jsonObject</span> <span class="operator">=</span> JSONUtil.createObj();</span><br><span class="line">        jsonObject.set(<span class="string">&quot;code&quot;</span>, -<span class="number">1</span>);</span><br><span class="line">        jsonObject.set(<span class="string">&quot;message&quot;</span>, <span class="string">&quot;无权限！&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> jsonObject;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">// 调用接口</span></span><br><span class="line">        <span class="type">HttpResponse</span> <span class="variable">response</span> <span class="operator">=</span> HttpRequest.get(<span class="string">&quot;http://202.202.3.68:52310/gateway/api/v2/thing-operator/namespaces/cqu-edu/projects/gas-turbine-engine-phm/things&quot;</span>)</span><br><span class="line">        									.execute();</span><br><span class="line">        <span class="keyword">return</span> JSONUtil.parseObj(response.body(), <span class="literal">true</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        <span class="type">JSONObject</span> <span class="variable">jsonObject</span> <span class="operator">=</span> JSONUtil.createObj();</span><br><span class="line">        jsonObject.set(<span class="string">&quot;code&quot;</span>, -<span class="number">1</span>);</span><br><span class="line">        jsonObject.set(<span class="string">&quot;message&quot;</span>, <span class="string">&quot;系统错误！&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> jsonObject;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p><strong>SDK：</strong></p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> JSONObject <span class="title function_">invokeByURL</span><span class="params">(String url, String params, String method)</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        HttpResponse response;</span><br><span class="line">        <span class="keyword">if</span> (<span class="string">&quot;POST&quot;</span>.equals(method)) &#123;</span><br><span class="line">            response = HttpRequest.post(url)</span><br><span class="line">                                    .addHeaders(getHeaderMap(params))</span><br><span class="line">                                    .body(params).execute();</span><br><span class="line">            <span class="type">String</span> <span class="variable">res</span> <span class="operator">=</span> response.body();</span><br><span class="line">            <span class="keyword">return</span> JSONUtil.parseObj(res);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">&quot;GET&quot;</span>.equals(method)) &#123;</span><br><span class="line">            response = HttpRequest.get(url)</span><br><span class="line">                                    .addHeaders(getHeaderMap(params))</span><br><span class="line">                                    .execute();</span><br><span class="line">            <span class="type">String</span> <span class="variable">res</span> <span class="operator">=</span> response.body();</span><br><span class="line">            <span class="keyword">return</span> JSONUtil.parseObj(res);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> JSONUtil.createObj().set(<span class="string">&quot;code&quot;</span>, -<span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p><code>** backend **</code>**的 **<code>**invoke **</code><strong>方法：</strong></p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping(&quot;/invoke&quot;)</span></span><br><span class="line"><span class="keyword">public</span> BaseResponse&lt;Object&gt; <span class="title function_">invokeInterfaceInfo</span><span class="params">(<span class="meta">@RequestBody</span> InterfaceInfoInvokeRequest interfaceInfoInvokeRequest,</span></span><br><span class="line"><span class="params">                                                HttpServletRequest request)</span> &#123;</span><br><span class="line">    <span class="comment">// 省略。。。。。。。。。。。。。。。。。。。。。</span></span><br><span class="line">    </span><br><span class="line">    <span class="type">PhmApiClient</span> <span class="variable">tempClient</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PhmApiClient</span>(accessKey, secretKey);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 根据url调用相应的方法</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">// SDK 返回的是JSONObject </span></span><br><span class="line">        <span class="type">JSONObject</span> <span class="variable">jsonObject</span> <span class="operator">=</span> tempClient.invokeByURL(interfaceInfo.getUrl(), userRequestParams, interfaceInfo.getMethod());</span><br><span class="line">        <span class="comment">// 如果 code == -1 说明出了问题 抛出异常</span></span><br><span class="line">        <span class="keyword">if</span> ((<span class="type">int</span>)jsonObject.get(<span class="string">&quot;code&quot;</span>) == -<span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BusinessException</span>(ErrorCode.NO_AUTH_ERROR, (String) jsonObject.get(<span class="string">&quot;message&quot;</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 返回的不再是字符串，而是JSONObject，可以方便渲染json</span></span><br><span class="line">        <span class="keyword">return</span> ResultUtils.success(jsonObject);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BusinessException</span>(ErrorCode.SYSTEM_ERROR, e.getMessage());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></li>
</ul>
<h2 id="前端对-JSON-进行渲染"><a href="#前端对-JSON-进行渲染" class="headerlink" title="前端对 JSON 进行渲染"></a>前端对 JSON 进行渲染</h2><p>前端界面请求后的结果是字符串，展示出来不友好。<br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.nlark.com/yuque/0/2023/png/35923527/1684987137712-62248f5d-8e4d-4326-be29-e762f74e84e4.png#averageHue=%23f4f4f4&clientId=u1bbb41f4-3f51-4&from=paste&height=295&id=u3dd841e8&originHeight=405&originWidth=2114&originalType=binary&ratio=1.375&rotation=0&showTitle=false&size=87776&status=done&style=none&taskId=u489927ce-db26-4133-a723-d5bb08aeb3b&title=&width=1537.4545454545455"
                      alt="image.png"
                ><br><strong>优化方案：</strong><br><strong>前提条件：在上一个优化中，我们已经统一返回结果为 JSONObject，因此可以找到一个前端组件，直接渲染 JSONObject。找到了 <strong><code>**react-json-view**</code></strong> 组件。</strong><br><a class="link"   target="_blank" rel="noopener" href="https://www.cnblogs.com/aleifighting/p/15100210.html" >react-json-view的使用 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a><br>在前端项目引入该库</p>
<div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install --save react-json-view --legacy-peer-deps</span><br><span class="line">// 要加上--legacy-peer-deps 否则可能报错</span><br></pre></td></tr></table></figure></div>
<p>然后在展示结果的地方，更改代码</p>
<div class="highlight-container" data-rel="Html"><figure class="iseeu highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Card</span> <span class="attr">hidden</span>=<span class="string">&#123;!invokeRes&#125;</span> <span class="attr">title</span>=<span class="string">&quot;结果&quot;</span> &gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Spin</span> <span class="attr">spinning</span>=<span class="string">&#123;invokeLoading&#125;/</span>&gt;</span></span><br><span class="line">    &#123;invokeRes ? <span class="tag">&lt;<span class="name">ReactJson</span> <span class="attr">theme</span>=<span class="string">&quot;rjv-default&quot;</span> <span class="attr">displayDataTypes</span>=<span class="string">&#123;false&#125;</span> <span class="attr">src</span>=<span class="string">&#123;invokeRes&#125;/</span>&gt;</span> : <span class="tag">&lt;&gt;</span>无<span class="tag">&lt;/&gt;</span>&#125;</span><br><span class="line">    &#123;/*&#123;invokeRes&#125;*/&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">Card</span>&gt;</span></span><br></pre></td></tr></table></figure></div>
<p>渲染后的效果对于JSON的显示更加友好：<br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.nlark.com/yuque/0/2023/png/35923527/1684987776986-35a72c54-74c1-49f3-abc0-b35047127d67.png#averageHue=%23fefdfc&clientId=u1bbb41f4-3f51-4&from=paste&height=289&id=uc226ac2d&originHeight=578&originWidth=846&originalType=binary&ratio=1.375&rotation=0&showTitle=false&size=59682&status=done&style=none&taskId=u5ff4f63e-bb0d-4a5c-9cfe-b976253cc5b&title=&width=423"
                      alt="image.png"
                ></p>
<h1 id="项目部署流程"><a href="#项目部署流程" class="headerlink" title="项目部署流程"></a>项目部署流程</h1><blockquote>
<p>新买了一个云服务器，部署这个项目</p>
</blockquote>
<h2 id="安装-MySQL"><a href="#安装-MySQL" class="headerlink" title="安装 MySQL"></a>安装 MySQL</h2><p>为了方便起见，直接在宝塔面板安装 MySQL，版本为8.0.<br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.nlark.com/yuque/0/2023/png/35923527/1684831300245-3f2603e9-59d3-455f-b720-ad892014400b.png#averageHue=%23fcfbfa&clientId=u0918ef5a-1737-4&from=paste&height=34&id=u522df07b&originHeight=47&originWidth=252&originalType=binary&ratio=1.375&rotation=0&showTitle=false&size=2324&status=done&style=none&taskId=u6a9499b0-28ed-4036-b33c-3be478ccf43&title=&width=183.27272727272728"
                      alt="image.png"
                ><br>安装完成后在 宝塔面板-安全 防火墙中放行3306端口，同时在腾讯云服务器的防火墙中也放行3306。<br>在宝塔面板中修改数据库 root 密码。</p>
<p><strong>在电脑远程测试连接云服务器的 MySQL，显示连接失败</strong><br>在服务器本机登录 MySQL，执行以下操作：</p>
<div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">mysql&gt; </span><span class="language-bash">use mysql;</span></span><br><span class="line">Database changed</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">mysql&gt; </span><span class="language-bash"><span class="keyword">select</span> user,host from user;</span></span><br><span class="line">+------------------+-----------+</span><br><span class="line">| user             | host      |</span><br><span class="line">+------------------+-----------+</span><br><span class="line">| mysql.infoschema | localhost |</span><br><span class="line">| mysql.session    | localhost |</span><br><span class="line">| mysql.sys        | localhost |</span><br><span class="line">| root             | localhost |</span><br><span class="line">+------------------+-----------+</span><br><span class="line">4 rows in set (0.00 sec)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">mysql&gt; </span><span class="language-bash">update user <span class="built_in">set</span> host = <span class="string">&#x27;%&#x27;</span> <span class="built_in">where</span> user=<span class="string">&#x27;root&#x27;</span>;</span></span><br><span class="line">Query OK, 1 row affected (0.01 sec)</span><br><span class="line">Rows matched: 1  Changed: 1  Warnings: 0</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">mysql&gt; </span><span class="language-bash"><span class="keyword">select</span> user,host from user;</span></span><br><span class="line">+------------------+-----------+</span><br><span class="line">| user             | host      |</span><br><span class="line">+------------------+-----------+</span><br><span class="line">| root             | %         |</span><br><span class="line">| mysql.infoschema | localhost |</span><br><span class="line">| mysql.session    | localhost |</span><br><span class="line">| mysql.sys        | localhost |</span><br><span class="line">+------------------+-----------+</span><br><span class="line">4 rows in set (0.01 sec)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">mysql&gt; </span><span class="language-bash">flush privileges;</span></span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br></pre></td></tr></table></figure></div>
<p>再次远程连接即可成功！<br>将本机的 <code>phmapi</code> 数据库复制到云服务器的数据库。</p>
<h2 id="安装-Redis"><a href="#安装-Redis" class="headerlink" title="安装 Redis"></a>安装 Redis</h2><p>在宝塔面板中安装 Redis<br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.nlark.com/yuque/0/2023/png/35923527/1684831627163-7f32716a-2c9a-4474-a21c-6f0adade7ef2.png#averageHue=%23f9f4f4&clientId=u0918ef5a-1737-4&from=paste&height=31&id=ueec57683&originHeight=42&originWidth=220&originalType=binary&ratio=1.375&rotation=0&showTitle=false&size=2396&status=done&style=none&taskId=u36c1ed60-051c-4e9a-861e-ad5aed5ae7f&title=&width=160"
                      alt="image.png"
                ><br>设置<br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.nlark.com/yuque/0/2023/png/35923527/1684831672371-bea2bb6f-5336-49ea-a912-a81c6e2cafbb.png#averageHue=%23f8f8f8&clientId=u0918ef5a-1737-4&from=paste&height=292&id=uc2a4c6a4&originHeight=401&originWidth=669&originalType=binary&ratio=1.375&rotation=0&showTitle=false&size=32086&status=done&style=none&taskId=u13708d9c-e0d7-4b6f-933b-155c441e61f&title=&width=486.54545454545456"
                      alt="image.png"
                ><br>同时宝塔和云服务器防火墙记得放行 6379 端口。</p>
<h2 id="安装-JDK1-8"><a href="#安装-JDK1-8" class="headerlink" title="安装 JDK1.8"></a>安装 JDK1.8</h2><ol>
<li><p>在 <code>/opt</code> 目录下新建两个文件夹，用于存放安装源文件和安装后的软件。</p>
<div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@miykah ~]# cd /opt/</span><br><span class="line">[root@miykah opt]# mkdir downfile</span><br><span class="line">[root@miykah opt]# mkdir software</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>下载 JDK 压缩包</p>
</li>
</ol>
<p><a class="link"   target="_blank" rel="noopener" href="https://www.oracle.com/java/technologies/downloads/#java8" >https://www.oracle.com/java/technologies/downloads/#java8 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a><br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.nlark.com/yuque/0/2023/png/35923527/1684832193386-b9d298cf-01e6-42aa-87bd-639f220e6419.png#averageHue=%23f9f8f8&clientId=u0918ef5a-1737-4&from=paste&height=543&id=u515b68ea&originHeight=747&originWidth=1654&originalType=binary&ratio=1.375&rotation=0&showTitle=false&size=101543&status=done&style=none&taskId=uc5059db4-0ed7-47a6-aabb-e02a49de861&title=&width=1202.909090909091"
                      alt="image.png"
                ><br>放到服务器的 <code>/opt/downfile</code>文件夹</p>
<div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@miykah downfile]# ll</span><br><span class="line">总用量 135512</span><br><span class="line">-rw-r--r-- 1 root root 138762230 5月  23 16:59 jdk-8u361-linux-x64.tar.gz</span><br></pre></td></tr></table></figure></div>

<ol start="3">
<li><p>解压 JDK 压缩包到<code>/opt/software</code> 目录</p>
<div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@miykah downfile]# tar -zxvf jdk-8u361-linux-x64.tar.gz -C /opt/software</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>配置环境变量</p>
</li>
</ol>
<p>Linux环境变量配置都在：&#x2F;etc&#x2F;profile文件中<br>VIM命令编辑文件（建议编辑前复制一份源文件作为备份）</p>
<div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1 #####vim打开编辑文件</span><br><span class="line">2 [root@miykah ~]# vim /etc/profile</span><br><span class="line">3  ………略………</span><br><span class="line">4 按键 i 进入插入编辑模式。</span><br></pre></td></tr></table></figure></div>
<p>编辑模式下，在结尾或开头添加如下：</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1 export JAVA_HOME=/opt/software/jdk1.8.0_361</span><br><span class="line">2 export PATH=$JAVA_HOME/bin:$PATH</span><br><span class="line">3 export CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar</span><br></pre></td></tr></table></figure></div>

<ol start="5">
<li>测试安装<div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1 [root@miyakh ~]# java -version</span><br><span class="line">2 [root@miyakh ~]# java</span><br><span class="line">3 [root@miyakh ~]# javac</span><br></pre></td></tr></table></figure></div></li>
</ol>
<h2 id="安装-Nacos"><a href="#安装-Nacos" class="headerlink" title="安装 Nacos"></a>安装 Nacos</h2><blockquote>
<p>本项目需要使用 Nacos 作为 Dubbo 的注册中心</p>
</blockquote>
<ol>
<li>下载 Nacos 压缩文件</li>
</ol>
<p><a class="link"   target="_blank" rel="noopener" href="https://github.com/alibaba/nacos/releases" >https://github.com/alibaba/nacos/releases <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p>
<ol start="2">
<li><p>上传到云服务器<code>/opt/downfile</code> 目录</p>
</li>
<li><p>解压安装包到 <code>/opt/software</code> 目录</p>
<div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@miykah downfile]# tar -zxvf nacos-server-2.2.2.tar.gz -C /opt/software/</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>启动Nacos</p>
<div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@miykah bin]# sh startup.sh -m standalone</span><br><span class="line">/opt/software/jdk1.8.0_361/bin/java -Djava.ext.dirs=/opt/software/jdk1.8.0_361/jre/lib/ext:/opt/software/jdk1.8.0_361/lib/ext  -Xms512m -Xmx512m -Xmn256m -Dnacos.standalone=true -Dnacos.member.list= -Xloggc:/opt/software/nacos/logs/nacos_gc.log -verbose:gc -XX:+PrintGCDetails -XX:+PrintGCDateStamps -XX:+PrintGCTimeStamps -XX:+UseGCLogFileRotation -XX:NumberOfGCLogFiles=10 -XX:GCLogFileSize=100M -Dloader.path=/opt/software/nacos/plugins,/opt/software/nacos/plugins/health,/opt/software/nacos/plugins/cmdb,/opt/software/nacos/plugins/selector -Dnacos.home=/opt/software/nacos -jar /opt/software/nacos/target/nacos-server.jar  --spring.config.additional-location=file:/opt/software/nacos/conf/ --logging.config=/opt/software/nacos/conf/nacos-logback.xml --server.max-http-header-size=524288</span><br><span class="line">nacos is starting with standalone</span><br><span class="line">nacos is starting，you can check the /opt/software/nacos/logs/start.out</span><br></pre></td></tr></table></figure></div>
<p>查看 nacos 日志看看是否启动成功</p>
<div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat  /opt/software/nacos/logs/start.out</span><br></pre></td></tr></table></figure></div>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.nlark.com/yuque/0/2023/png/35923527/1684835390931-2c862064-bb7a-4ef5-b25e-d3714d48aa39.png#averageHue=%2310161c&clientId=u0918ef5a-1737-4&from=paste&height=489&id=u5b07530d&originHeight=673&originWidth=1121&originalType=binary&ratio=1.375&rotation=0&showTitle=false&size=59663&status=done&style=none&taskId=u59091839-d605-4dba-af19-04de273e00e&title=&width=815.2727272727273"
                      alt="image.png"
                ></p>
</li>
<li><p>访问 Nacos 主页</p>
</li>
</ol>
<p><a class="link"   target="_blank" rel="noopener" href="http://服务器ip:8848/nacos" >http:&#x2F;&#x2F;服务器IP:8848&#x2F;nacos <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a>&#x2F;</p>
<h2 id="后端项目部署"><a href="#后端项目部署" class="headerlink" title="后端项目部署"></a>后端项目部署</h2><h3 id="打包后端项目"><a href="#打包后端项目" class="headerlink" title="打包后端项目"></a>打包后端项目</h3><ol>
<li><p>更改后端配置文件</p>
<div class="highlight-container" data-rel="Yaml"><figure class="iseeu highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">phmapi-backend</span></span><br><span class="line">  <span class="comment"># DataSource Config</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/phmapi</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root2</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">root2</span></span><br><span class="line">  <span class="attr">mvc:</span></span><br><span class="line">    <span class="attr">pathmatch:</span></span><br><span class="line">      <span class="attr">matching-strategy:</span> <span class="string">ANT_PATH_MATCHER</span></span><br><span class="line">  <span class="comment"># session 失效时间（分钟）</span></span><br><span class="line">  <span class="attr">session:</span></span><br><span class="line">    <span class="attr">timeout:</span> <span class="number">86400</span></span><br><span class="line">    <span class="attr">store-type:</span> <span class="string">redis</span></span><br><span class="line">  <span class="comment"># redis 配置</span></span><br><span class="line">  <span class="attr">redis:</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">6379</span></span><br><span class="line">    <span class="attr">host:</span> <span class="string">localhost</span></span><br><span class="line">    <span class="attr">database:</span> <span class="number">1</span>  <span class="comment"># database0是之前黑马点评在用，避免混乱，这里存在database1</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">Ranmaoqi0718</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">7529</span></span><br><span class="line">  <span class="attr">servlet:</span></span><br><span class="line">    <span class="attr">context-path:</span> <span class="string">/api</span></span><br><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="attr">map-underscore-to-camel-case:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">log-impl:</span> <span class="string">org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br><span class="line">  <span class="attr">global-config:</span></span><br><span class="line">    <span class="attr">db-config:</span></span><br><span class="line">      <span class="attr">logic-delete-field:</span> <span class="string">isDelete</span> <span class="comment"># 全局逻辑删除的实体字段名(since 3.3.0,配置后可以忽略不配置步骤2)</span></span><br><span class="line">      <span class="attr">logic-delete-value:</span> <span class="number">1</span> <span class="comment"># 逻辑已删除值(默认为 1)</span></span><br><span class="line">      <span class="attr">logic-not-delete-value:</span> <span class="number">0</span> <span class="comment"># 逻辑未删除值(默认为 0)</span></span><br><span class="line"><span class="attr">phmapi:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">access-key:</span> <span class="string">34713006f9ba482bbd8f5d695d58da9d</span></span><br><span class="line">    <span class="attr">secret-key:</span> <span class="string">dbba2bf9cd1648f4bf59db21dcfb3a4c</span></span><br><span class="line"></span><br><span class="line"><span class="attr">dubbo:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">dubbo-springboot-demo-provider</span></span><br><span class="line">  <span class="attr">protocol:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">dubbo</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">-1</span></span><br><span class="line">  <span class="attr">registry:</span></span><br><span class="line">    <span class="attr">id:</span> <span class="string">nacos-registry</span></span><br><span class="line">    <span class="attr">address:</span> <span class="string">nacos://localhost:8848</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></div>
</li>
<li><p>运行 maven clean 后运行 maven package</p>
</li>
</ol>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.nlark.com/yuque/0/2023/png/35923527/1684836740368-5f3ca459-1a41-4240-8d83-cbe31d1a951d.png#averageHue=%233b4044&clientId=u0918ef5a-1737-4&from=paste&height=246&id=u04f864de&originHeight=338&originWidth=354&originalType=binary&ratio=1.375&rotation=0&showTitle=false&size=17875&status=done&style=none&taskId=u08b18b34-660f-4b3a-8e32-64b6a646226&title=&width=257.45454545454544"
                      alt="image.png"
                ></p>
<ol start="3">
<li>将打包好的 <code>jar</code>文件改个简单名，上传到服务器</li>
</ol>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.nlark.com/yuque/0/2023/png/35923527/1684836774095-61cbfae6-bedc-44a7-85c6-0d88cde61e40.png#averageHue=%23504c42&clientId=u0918ef5a-1737-4&from=paste&height=133&id=u62afcae1&originHeight=183&originWidth=361&originalType=binary&ratio=1.375&rotation=0&showTitle=false&size=8307&status=done&style=none&taskId=uf0930859-5114-4d92-8be1-cbc464f976d&title=&width=262.54545454545456"
                      alt="image.png"
                ><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.nlark.com/yuque/0/2023/png/35923527/1684837323956-3f436382-7d1b-42f9-be1f-9c9e4f520693.png#averageHue=%23f7f4f0&clientId=u0918ef5a-1737-4&from=paste&height=47&id=u9a12a7d6&originHeight=64&originWidth=332&originalType=binary&ratio=1.375&rotation=0&showTitle=false&size=5818&status=done&style=none&taskId=ucc6e7a82-8521-45b4-987d-ee56d540bd4&title=&width=241.45454545454547"
                      alt="image.png"
                ></p>
<blockquote>
<p>同样的操作 对于 <code>phmapi-gateway</code>和 <code>phmapi-interface</code><br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.nlark.com/yuque/0/2023/png/35923527/1684837535874-db0846f1-2edf-4452-a6e4-9be3d252e098.png#averageHue=%23f4f0eb&clientId=u2e175b83-982d-4&from=paste&height=62&id=u3e18fde7&originHeight=85&originWidth=648&originalType=binary&ratio=1.375&rotation=0&showTitle=false&size=12970&status=done&style=none&taskId=u0ca56967-30ca-4a53-9145-af931ce0b63&title=&width=471.27272727272725"
                      alt="image.png"
                ></p>
</blockquote>
<h3 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h3><blockquote>
<p>可以使用 nohup java -jar命令运行这几个jar包。<br>但为了方便可视化操作，以及在宝塔查看运行日志，使用宝塔运行项目</p>
</blockquote>
<p>以 <code>phmapi-backend</code> 为例，在<strong>宝塔面板-网站-Java项目</strong>中新建Java项目，选择 Spring Boot 项目<br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.nlark.com/yuque/0/2023/png/35923527/1684844207261-0bf1bbba-496f-4b46-b2c4-aead6f790b54.png#averageHue=%23f9f9f9&clientId=u2e175b83-982d-4&from=paste&height=496&id=u0aea1ada&originHeight=682&originWidth=714&originalType=binary&ratio=1.375&rotation=0&showTitle=false&size=51050&status=done&style=none&taskId=uef231a0a-65e8-48cb-acb7-d8df0d93300&title=&width=519.2727272727273"
                      alt="image.png"
                ><br>设置好端口即可运行，<code>phmapi-gateway</code> 和 <code>phmapi-interface</code> 同理。<br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.nlark.com/yuque/0/2023/png/35923527/1684844255784-2efcc288-1d24-4c97-9428-fabbcb92bb3a.png#averageHue=%23fbfaf9&clientId=u2e175b83-982d-4&from=paste&height=158&id=u8896f029&originHeight=217&originWidth=1092&originalType=binary&ratio=1.375&rotation=0&showTitle=false&size=26932&status=done&style=none&taskId=ud83106e9-8cbf-46a5-9489-38bfd9498f2&title=&width=794.1818181818181"
                      alt="image.png"
                ></p>
<h2 id="前端项目部署"><a href="#前端项目部署" class="headerlink" title="前端项目部署"></a>前端项目部署</h2><blockquote>
<p>部署前端项目需要安装 nginx， 使用宝塔软件商店安装。<br>安装目录默认在 <code>/www/server/nginx</code></p>
</blockquote>
<h3 id="打包前端项目"><a href="#打包前端项目" class="headerlink" title="打包前端项目"></a>打包前端项目</h3><ol>
<li>首先需要修改前端项目中 <code>src/requestConfig.rs</code> 文件，将 <code>baseURL</code>改为服务器的host，并且不能是 localhost（试了一次使用 localhost 请求不到后端项目）</li>
</ol>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.nlark.com/yuque/0/2023/png/35923527/1684844392782-aba674a6-efb4-4ba3-8cba-e8827e18c894.png#averageHue=%232f2d2c&clientId=u2e175b83-982d-4&from=paste&height=80&id=u59226d5e&originHeight=110&originWidth=440&originalType=binary&ratio=1.375&rotation=0&showTitle=false&size=18988&status=done&style=none&taskId=ue29b1866-a4ee-40cf-a71b-883ea06b7d2&title=&width=320"
                      alt="image.png"
                ></p>
<ol start="2">
<li>执行 <code>npm run build</code> 打包前端项目，会在项目目录下生成 <code>dist</code>文件夹，拷贝文件夹到服务器的 <code>/opt/frontend_file</code>目录，并改名为 phmapi-frontend<div class="highlight-container" data-rel="Yaml"><figure class="iseeu highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">root@miykah</span> <span class="string">frontend_file</span>]<span class="comment"># ll</span></span><br><span class="line"><span class="string">总用量</span> <span class="number">4</span></span><br><span class="line"><span class="string">drwxr-xr-x</span> <span class="number">4</span> <span class="string">root</span> <span class="string">root</span> <span class="number">4096 </span><span class="number">5</span><span class="string">月</span>  <span class="number">23</span> <span class="number">19</span><span class="string">:47</span> <span class="string">phmapi-frontend</span></span><br></pre></td></tr></table></figure></div></li>
</ol>
<h3 id="修改-nginx-配置文件"><a href="#修改-nginx-配置文件" class="headerlink" title="修改 nginx 配置文件"></a>修改 nginx 配置文件</h3><p>修改 <code>/www/server/nginx/conf/nginx.conf</code> 文件，添加如下：</p>
<div class="highlight-container" data-rel="Yaml"><figure class="iseeu highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">server</span></span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">listen</span> <span class="number">8000</span><span class="string">;</span></span><br><span class="line">      <span class="string">server_name</span> <span class="string">localhost;</span></span><br><span class="line">      </span><br><span class="line">      <span class="string">location</span> <span class="string">/</span> &#123;</span><br><span class="line">        <span class="string">root</span> <span class="string">/opt/frontend_file/phmapi-frontend;</span></span><br><span class="line">        <span class="string">index</span> <span class="string">index.html</span> <span class="string">index.htm;</span></span><br><span class="line">        <span class="string">try_files</span>  <span class="string">$uri</span> <span class="string">$uri/</span> <span class="string">/index.html;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></div>
<p>重载 nginx 配置：</p>
<div class="highlight-container" data-rel="Yaml"><figure class="iseeu highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">nginx</span> <span class="string">-s</span> <span class="string">reload</span></span><br></pre></td></tr></table></figure></div>
<p>访问 <a class="link"   target="_blank" rel="noopener" href="http://139.155.144.134:8000/" >http://139.155.144.134:8000/ <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a> 成功！</p>
<h3 id="BUG解决：前端界面跳转页面的时候404"><a href="#BUG解决：前端界面跳转页面的时候404" class="headerlink" title="BUG解决：前端界面跳转页面的时候404"></a>BUG解决：前端界面跳转页面的时候404</h3><p>上面前端部署完成之后，可以正常登录进入首页，但是点击页面的某些地方，需要跳转到另一页面的时候，出现404<br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.nlark.com/yuque/0/2023/png/35923527/1684845068843-4eee72ff-500b-4254-8507-6088f7b811d7.png#averageHue=%23f1f0ef&clientId=u2e175b83-982d-4&from=paste&height=100&id=u60c9f64c&originHeight=137&originWidth=341&originalType=binary&ratio=1.375&rotation=0&showTitle=false&size=5031&status=done&style=none&taskId=uf304f8d1-c7b9-429c-ac8f-0649f81f85e&title=&width=248"
                      alt="image.png"
                ><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.nlark.com/yuque/0/2023/png/35923527/1684845112001-a0d0adb6-46b3-4c13-85e9-acfece450f6a.png#averageHue=%23fefdfd&clientId=u2e175b83-982d-4&from=paste&height=108&id=u6ed2c870&originHeight=148&originWidth=593&originalType=binary&ratio=1.375&rotation=0&showTitle=false&size=34857&status=done&style=none&taskId=uefe467ed-9f47-4b48-8c8c-43d50261dfb&title=&width=431.27272727272725"
                      alt="image.png"
                ><br><strong>原因分析：</strong><br>原因是因为web单页面开发模式，只有一个index.html入口，其他路径是前端路由去跳转的，nginx没有对应这个路径，当然就是404了。<br><strong>解决办法：</strong><br>在 nginx 配置文件中修改如下：</p>
<div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">server</span><br><span class="line">    &#123;</span><br><span class="line">      listen 8000;</span><br><span class="line">      server_name localhost;</span><br><span class="line">      </span><br><span class="line">      location / &#123;</span><br><span class="line">        root /opt/frontend_file/phmapi-frontend;</span><br><span class="line">        index index.html index.htm;</span><br><span class="line">        try_files  $uri $uri/ /index.html;  # 添加这行配置</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></div>
<p>在配置中加上try_files，意思跟翻译差不多，“尝试读取文件”。uri 这个是 nginx 的一个变量 ，存放着用户访问的地址 , 例 如 <a class="link"   target="_blank" rel="noopener" href="http://localhost:8200/chooseSize" >http://localhost:8200/chooseSize <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a>  那 么 uri 这个是nginx的一个变量，存放着用户访问的地址,例如<a class="link"   target="_blank" rel="noopener" href="http://localhost:8200/chooseSize" >http://localhost:8200/chooseSize <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a> 那么uri这个是nginx的一个变量，存放着用户访问的地址,例如<a class="link"   target="_blank" rel="noopener" href="http://localhost:8200/chooseSize" >http://localhost:8200/chooseSize <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a>那么uri就是&#x2F;chooseSize；u r i &#x2F; 代 表 访 问 的 是 一 个 目 录 例 如 <a class="link"   target="_blank" rel="noopener" href="http://localhost:8200/chooseSize" >http://localhost:8200/chooseSize <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a>&#x2F;，那 么 uri&#x2F; 代表访问的是一个目录 例如<a class="link"   target="_blank" rel="noopener" href="http://localhost:8200/chooseSize/" >http://localhost:8200/chooseSize/ <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a> 那么uri&#x2F;代表访问的是一个目录例如<a class="link"   target="_blank" rel="noopener" href="http://localhost:8200/chooseSize/" >http://localhost:8200/chooseSize/ <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a>那么uri&#x2F;就是&#x2F;chooseSize&#x2F;；最后&#x2F;index.html就是我们首页的地址。<br>最终上面的意思是如果第一个存在，直接返回；不存在的话读取第二个，如果存在，读取返回；如果还是不存在，就会fall back到 try_files 的最后一个选项 &#x2F;index.html,发起一个内部 “子请求”，也就是相当于 nginx 发起一个 HTTP 请求到 <a class="link"   target="_blank" rel="noopener" href="http://localhost:8200/index.html" >http://localhost:8200/index.html <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a>，再通过前端路由到&#x2F;chooseSize。</p>
<h3 id="BUG解决：点击测试接口，但一直没反应"><a href="#BUG解决：点击测试接口，但一直没反应" class="headerlink" title="BUG解决：点击测试接口，但一直没反应"></a>BUG解决：点击测试接口，但一直没反应</h3><p>发现服务器数据库中，接口的 url 都是172.168.9.61 而不是服务器的 ip ，当然没反应。<br>改了之后就成功勒</p>

            </div>

            

            

            

            
                <div class="article-nav">
                    
                    
                        <div class="article-next">
                            <a class="next"
                            rel="next"
                            href="/2023/05/29/%E4%B9%90%E8%A7%82%E9%94%81%E5%92%8C%E6%82%B2%E8%A7%82%E9%94%81/"
                            >
                                <span class="title flex-center">
                                    <span class="post-nav-title-item">乐观锁和悲观锁</span>
                                    <span class="post-nav-item">下一篇</span>
                                </span>
                                <span class="right arrow-icon flex-center">
                                    <i class="fa-solid fa-chevron-right"></i>
                                </span>
                            </a>
                        </div>
                    
                </div>
            


            
                <div class="comment-container">
                    <div class="comments-container">
    <div id="comment-anchor"></div>
    <div class="comment-area-title">
        <i class="fa-solid fa-comments"></i>&nbsp;评论
    </div>
    

        
            
 
    <div id="waline"></div>
    <script type="module"  data-pjax>
        import { init } from 'https://evan.beee.top/js/waline.mjs';

        function loadWaline() {
            init({
                el: '#waline',
                serverURL: 'https://comment.miykah.top/',
                lang: 'zh-CN',
                dark: 'body[class~="dark-mode"]',
                requiredMeta: ['nick','mail'], // cannot customize by theme config, change it yourself
            });
        }

        if ('true') {
            const loadWalineTimeout = setTimeout(() => {
                loadWaline();
                clearTimeout(loadWalineTimeout);
            }, 1000);
        } else {
            window.addEventListener('DOMContentLoaded', loadWaline);
        }
        
    </script>



        
    
</div>

                </div>
            
        </div>

        
            <div class="toc-content-container">
                <div class="post-toc-wrap">
    <div class="post-toc">
        <div class="toc-title">此页目录</div>
        <div class="page-title">接口开放平台项目总结</div>
        <ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%A1%B9%E7%9B%AE%E8%83%8C%E6%99%AF"><span class="nav-text">项目背景</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%B8%BB%E8%A6%81%E5%8A%9F%E8%83%BD"><span class="nav-text">主要功能</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%B8%BB%E8%A6%81%E6%8A%80%E6%9C%AF%E9%80%89%E5%9E%8B"><span class="nav-text">主要技术选型</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%9E%B6%E6%9E%84%E5%9B%BE"><span class="nav-text">架构图</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%90%8E%E7%AB%AF%E9%A1%B9%E7%9B%AE%E5%88%92%E5%88%86"><span class="nav-text">后端项目划分</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AE%80%E5%8E%86%E5%86%99%E6%B3%95"><span class="nav-text">简历写法</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%A1%B9%E7%9B%AE%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98"><span class="nav-text">项目遇到的问题</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#BUG%E8%A7%A3%E5%86%B3"><span class="nav-text">BUG解决</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E6%BA%90%E9%85%8D%E7%BD%AE%E9%97%AE%E9%A2%98"><span class="nav-text">数据源配置问题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%82%B9%E5%87%BB%E8%B0%83%E7%94%A8%E6%8E%A5%E5%8F%A3%EF%BC%8C%E6%8E%A5%E5%8F%A3%E8%B0%83%E7%94%A8%E6%AC%A1%E6%95%B0%E5%87%8F%E4%BA%86%E4%B8%A4%E6%AC%A1"><span class="nav-text">点击调用接口，接口调用次数减了两次</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%A3%E5%86%B3%E7%BB%95%E8%BF%87%E7%BD%91%E5%85%B3%E8%AF%B7%E6%B1%82%E6%8E%A5%E5%8F%A3%E9%97%AE%E9%A2%98"><span class="nav-text">解决绕过网关请求接口问题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%89%8D%E7%AB%AFBUG%EF%BC%9A%E7%94%A8%E6%88%B7%E5%A4%B4%E5%83%8F%E5%8A%A0%E8%BD%BD%E4%B8%8D%E5%87%BA%E6%9D%A5%EF%BC%8C%E5%AF%BC%E8%87%B4%E5%BC%B9%E4%B8%8D%E5%87%BA%E9%80%80%E5%87%BA%E7%99%BB%E5%BD%95"><span class="nav-text">前端BUG：用户头像加载不出来，导致弹不出退出登录</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%89%8D%E7%AB%AFBUG%EF%BC%9A%E7%82%B9%E5%87%BB%E9%80%80%E5%87%BA%E7%99%BB%E5%BD%95%E5%90%8E%EF%BC%8C%E4%B8%8D%E8%B7%B3%E8%BD%AC%E5%88%B0%E7%99%BB%E5%BD%95%E9%A1%B5%E9%9D%A2"><span class="nav-text">前端BUG：点击退出登录后，不跳转到登录页面</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%BC%8F%E6%B4%9E%E8%A7%A3%E5%86%B3"><span class="nav-text">漏洞解决</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Apache-Dubbo-%E6%BC%8F%E6%B4%9E%E4%BF%AE%E5%A4%8D"><span class="nav-text">Apache Dubbo 漏洞修复</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#FasterXML-jackson-databind-%E6%BC%8F%E6%B4%9E%E4%BF%AE%E5%A4%8D"><span class="nav-text">FasterXML jackson-databind 漏洞修复</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Spring-Framework-%E8%BA%AB%E4%BB%BD%E8%AE%A4%E8%AF%81%E7%BB%95%E8%BF%87%E6%BC%8F%E6%B4%9E"><span class="nav-text">Spring Framework 身份认证绕过漏洞</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%A1%B9%E7%9B%AE%E4%BC%98%E5%8C%96"><span class="nav-text">项目优化</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BD%91%E5%85%B3%E8%BF%94%E5%9B%9E%E8%87%AA%E5%AE%9A%E4%B9%89%E5%80%BC"><span class="nav-text">网关返回自定义值</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%89%8D%E7%AB%AF%E5%AF%B9-JSON-%E8%BF%9B%E8%A1%8C%E6%B8%B2%E6%9F%93"><span class="nav-text">前端对 JSON 进行渲染</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2%E6%B5%81%E7%A8%8B"><span class="nav-text">项目部署流程</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85-MySQL"><span class="nav-text">安装 MySQL</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85-Redis"><span class="nav-text">安装 Redis</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85-JDK1-8"><span class="nav-text">安装 JDK1.8</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85-Nacos"><span class="nav-text">安装 Nacos</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%90%8E%E7%AB%AF%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2"><span class="nav-text">后端项目部署</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%89%93%E5%8C%85%E5%90%8E%E7%AB%AF%E9%A1%B9%E7%9B%AE"><span class="nav-text">打包后端项目</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%83%A8%E7%BD%B2"><span class="nav-text">部署</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2"><span class="nav-text">前端项目部署</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%89%93%E5%8C%85%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AE"><span class="nav-text">打包前端项目</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9-nginx-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="nav-text">修改 nginx 配置文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#BUG%E8%A7%A3%E5%86%B3%EF%BC%9A%E5%89%8D%E7%AB%AF%E7%95%8C%E9%9D%A2%E8%B7%B3%E8%BD%AC%E9%A1%B5%E9%9D%A2%E7%9A%84%E6%97%B6%E5%80%99404"><span class="nav-text">BUG解决：前端界面跳转页面的时候404</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#BUG%E8%A7%A3%E5%86%B3%EF%BC%9A%E7%82%B9%E5%87%BB%E6%B5%8B%E8%AF%95%E6%8E%A5%E5%8F%A3%EF%BC%8C%E4%BD%86%E4%B8%80%E7%9B%B4%E6%B2%A1%E5%8F%8D%E5%BA%94"><span class="nav-text">BUG解决：点击测试接口，但一直没反应</span></a></li></ol></li></ol></li></ol>

    </div>
</div>
            </div>
        
    </div>
</div>


                

            </div>
            
            

        </div>

        <div class="main-content-footer">
            <footer class="footer">
    <div class="info-container">
        <div class="copyright-info">
            &copy;
            
              <span>2023</span>
              -
            
            2023&nbsp;&nbsp;<i class="fa-solid fa-person-skiing-nordic fa-bounce"></i>&nbsp;&nbsp;<a href="/">Miykah</a>
        </div>
        
            <script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            <div class="website-count info-item">
                
                    <span id="busuanzi_container_site_uv" class="busuanzi_container_site_uv">
                        访问人数&nbsp;<span id="busuanzi_value_site_uv" class="busuanzi_value_site_uv"></span>
                    </span>
                
                
                    <span id="busuanzi_container_site_pv" class="busuanzi_container_site_pv">
                        总访问量&nbsp;<span id="busuanzi_value_site_pv" class="busuanzi_value_site_pv"></span>
                    </span>
                
            </div>
        
        <div class="theme-info info-item">
            <span class="powered-by-container">由 <?xml version="1.0" encoding="utf-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg version="1.1" id="圖層_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1rem" height="1rem" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve"><path fill="#0E83CD" d="M256.4,25.8l-200,115.5L56,371.5l199.6,114.7l200-115.5l0.4-230.2L256.4,25.8z M349,354.6l-18.4,10.7l-18.6-11V275H200v79.6l-18.4,10.7l-18.6-11v-197l18.5-10.6l18.5,10.8V237h112v-79.6l18.5-10.6l18.5,10.8V354.6z"/></svg><a target="_blank" href="https://hexo.io">Hexo</a> 驱动</span>
                <br>
            <span class="theme-version-container">主题&nbsp;<a class="theme-version" target="_blank" href="https://github.com/EvanNotFound/hexo-theme-redefine">Redefine v2.1.4</a>
        </div>
        
            <div class="icp-info info-item"><a target="_blank" rel="nofollow" href="
                
                https://beian.miit.gov.cn
                
                ">蜀ICP备2022000428号-1</a></div>
        
        
        
            <div id="start_div" style="display:none">
                2023/5/25 22:02:14
            </div>
            <div>
                博客已运行 <span class="odometer" id="runtime_days" ></span> 天 <span class="odometer" id="runtime_hours"></span> 小时 <span class="odometer" id="runtime_minutes"></span> 分钟 <span class="odometer" id="runtime_seconds"></span> 秒
            </div>
        
        
            <div class="customize-info info-item">前面忘了，中间忘了，后面忘了。</div>
        
        
            <script async data-pjax>
                try {
                    function odometer_init() {
                    const elements = document.querySelectorAll('.odometer');
                    elements.forEach(el => {
                        new Odometer({
                            el,
                            format: '( ddd).dd',
                            duration: 200
                        });
                    });
                    }
                    odometer_init();
                } catch (error) {}
            </script>
        
        
        
    </div>  
</footer>
        </div>
    </div>

    
        <div class="post-tools">
            <div class="post-tools-container">
    <ul class="article-tools-list">
        <!-- TOC aside toggle -->
        
            <li class="right-bottom-tools page-aside-toggle">
                <i class="fa-regular fa-outdent"></i>
            </li>
        

        <!-- go comment -->
        
            <li class="go-comment">
                <i class="fa-regular fa-comments"></i>
            </li>
        
    </ul>
</div>

        </div>
    

    <div class="right-side-tools-container">
        <div class="side-tools-container">
    <ul class="hidden-tools-list">
        <li class="right-bottom-tools tool-font-adjust-plus flex-center">
            <i class="fa-regular fa-magnifying-glass-plus"></i>
        </li>

        <li class="right-bottom-tools tool-font-adjust-minus flex-center">
            <i class="fa-regular fa-magnifying-glass-minus"></i>
        </li>

        <li class="right-bottom-tools tool-expand-width flex-center">
            <i class="fa-regular fa-expand"></i>
        </li>

        <li class="right-bottom-tools tool-dark-light-toggle flex-center">
            <i class="fa-regular fa-moon"></i>
        </li>

        <!-- rss -->
        

        

        <li class="right-bottom-tools tool-scroll-to-bottom flex-center">
            <i class="fa-regular fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="visible-tools-list">
        <li class="right-bottom-tools toggle-tools-list flex-center">
            <i class="fa-regular fa-cog fa-spin"></i>
        </li>
        
            <li class="right-bottom-tools tool-scroll-to-top flex-center">
                <i class="arrow-up fas fa-arrow-up"></i>
                <span class="percent"></span>
            </li>
        
        
    </ul>
</div>

    </div>

    <div class="image-viewer-container">
    <img src="">
</div>


    
        <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
          <span class="search-input-field-pre">
            <i class="fa-solid fa-keyboard"></i>
          </span>
            <div class="search-input-container">
                <input autocomplete="off"
                       autocorrect="off"
                       autocapitalize="off"
                       placeholder="搜索..."
                       spellcheck="false"
                       type="search"
                       class="search-input"
                >
            </div>
            <span class="popup-btn-close">
                <i class="fa-solid fa-times"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fa-solid fa-spinner fa-spin-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>

    


</main>



<script src="//npm.elemecdn.com/hexo-theme-redefine@2.1.4/source/js/utils.js"></script><script src="//npm.elemecdn.com/hexo-theme-redefine@2.1.4/source/js/main.js"></script><script src="//npm.elemecdn.com/hexo-theme-redefine@2.1.4/source/js/layouts/navbarShrink.js"></script><script src="//npm.elemecdn.com/hexo-theme-redefine@2.1.4/source/js/tools/scrollTopBottom.js"></script><script src="//npm.elemecdn.com/hexo-theme-redefine@2.1.4/source/js/tools/lightDarkSwitch.js"></script>


    <script src="//npm.elemecdn.com/hexo-theme-redefine@2.1.4/source/js/tools/localSearch.js"></script>



    <script src="//npm.elemecdn.com/hexo-theme-redefine@2.1.4/source/js/tools/codeBlock.js"></script>



    <script src="//npm.elemecdn.com/hexo-theme-redefine@2.1.4/source/js/layouts/lazyload.js"></script>



    <script src="//npm.elemecdn.com/hexo-theme-redefine@2.1.4/source/js/tools/runtime.js"></script>
    <script src="//npm.elemecdn.com/hexo-theme-redefine@2.1.4/source/js/layouts/odometer.min.js"></script>
    <link rel="stylesheet" href="//npm.elemecdn.com/hexo-theme-redefine@2.1.4/source/assets/odometer-theme-minimal.css">



  <script src="//npm.elemecdn.com/hexo-theme-redefine@2.1.4/source/js/libs/Typed.min.js"></script>
  <script src="//npm.elemecdn.com/hexo-theme-redefine@2.1.4/source/js/plugins/typed.js"></script>






<div class="post-scripts pjax">
    
        <script src="//npm.elemecdn.com/hexo-theme-redefine@2.1.4/source/js/tools/tocToggle.js"></script><script src="//npm.elemecdn.com/hexo-theme-redefine@2.1.4/source/js/libs/anime.min.js"></script><script src="//npm.elemecdn.com/hexo-theme-redefine@2.1.4/source/js/layouts/toc.js"></script><script src="//npm.elemecdn.com/hexo-theme-redefine@2.1.4/source/js/plugins/tabs.js"></script>
    
</div>


    <script src="//npm.elemecdn.com/hexo-theme-redefine@2.1.4/source/js/libs/pjax.min.js"></script>
<script>
    window.addEventListener('DOMContentLoaded', () => {
        window.pjax = new Pjax({
            selectors: [
                'head title',
                '.page-container',
                '.pjax',
            ],
            history: true,
            debug: false,
            cacheBust: false,
            timeout: 0,
            analytics: false,
            currentUrlFullReload: false,
            scrollRestoration: false,
            // scrollTo: true,
        });

        document.addEventListener('pjax:send', () => {
            Global.utils.pjaxProgressBarStart();
        });

        document.addEventListener('pjax:complete', () => {
            Global.utils.pjaxProgressBarEnd();
            window.pjax.executeScripts(document.querySelectorAll('script[data-pjax], .pjax script'));
            Global.refresh();
        });
    });
</script>




<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"model":{"jsonPath":"/live2dw/assets/haruto.model.json"},"display":{"position":"left","width":150,"height":300},"mobile":{"show":false},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
</html>
